<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>METEOR CHAT</title>
  <!-- Latest compiled and minified CSS -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous"
  />
  <!-- Font Awesome File -->
  <script src="https://kit.fontawesome.com/00fae642f1.js"></script>
  <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"
  ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
</head>
<template name="main">
  {{#if Template.subscriptionsReady}}
  {{#if currentUser }}
  <div class="container">
    <!-- Content wrapper start -->
    <div class="content-wrapper">
      <!-- Row start -->
      <div class="row gutters">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
          <div class="card m-0">
            <!-- Row start -->
            <div
              class="row no-gutters contentContainer"
              style="height: 100vh; overflow-y: scroll; overflow-x: hidden;"
            >
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3">
                <div class="users-container">
                  <div class="chat-search-box">
                    {{> loginButtons}}
                    <a href="/search">
                      <button class="btn btn-block btn-success mt-2">
                        Add New Contact
                      </button></a
                    >
                  </div>
                  <ul class="users">
                    {{#each fetchConnection}}
                    <li class="person connectedPerson" id="{{ user_id }}">
                      <div class="user">
                        <img
                          src="https://www.bootdey.com/img/Content/avatar/avatar3.png"
                          alt="Retail Admin"
                        />
                        <span class="status busy"></span>
                      </div>
                      <p class="name-time">
                        <span class="name">{{ name }}</span>
                        <br />
                        <span class="time">{{ email }}</span>
                      </p>
                    </li>
                    {{/each}}
                  </ul>
                </div>
              </div>
              <div
                id="mainContainerChat"
                class="col-xl-8 col-lg-8 col-md-8 col-sm-9 col-9"
              >
                <div id="mainContainerChatHead">
                  <div
                    style="width: 100%; height: 100%; text-align: center; margin-top: 110px;"
                    class="display-4"
                  >
                    No User Selected
                  </div>
                </div>
                <div class="chat-container">
                  <ul class="chat-box chatContainerScroll" id="chatBox"></ul>
                  <div
                    id="messageContainer"
                    class="fixed-bottom col-md-6"
                    style="margin-left: 475px; display: inline;"
                  ></div>
                </div>
              </div>
            </div>
            <!-- Row end -->
          </div>
        </div>
      </div>
      <!-- Row end -->
    </div>
    <!-- Content wrapper end -->
  </div>
  {{else}}
  {{> Login}}
  {{/if}}
  {{else}}
  <div style="text-align: center" class="mt-3">
    <i
      id="leftPanelLoader"
      class="spinner fas fa-atom mr-2 mb-3 mt-3 "
      style="font-size:6em; color:#aed9f5; "
    ></i>
    <h3 class="display-5">Loading...</h3>
  </div>
  {{/if}}
</template>
